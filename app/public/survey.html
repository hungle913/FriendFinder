<!DOCTYPE html>
<html lang="en-us">
<head>
    
    <meta charset="UTF-8">
    <title> Friend Finder </title>

    <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">     
    <link rel="stylesheet" type="text/css" href="assets/style.css">

    <!-- JS -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

</head>

<body>

    <div class="container">
        <h3 class="center-align"><i class='fas fa-dog'></i>Survey Questions</h3>
        <br>
        <h4 class="center-align">About Your Pup</h4>
        <form class="col s12">
            <div class="row">
                <div class="input-field col s6">
                    <input id="name" type="text" class="validate" required>
                    <label for="name">Name (Required)</label>
                </div>

                <div class="input-field col s6">
                    <input id="photo" type="text" class="validate" required>
                    <label for="photo">Link to Photo Image (Required)</label>
                </div>
            </div>
        </form> 

        <form class="col s12">
            <div class="row">
                <div class="input-field col s6">
                    <h4>Question 1</h4>
                    <h5>Your pup loves to sleep in late</h5>
                    <select id="q1" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s6">
                    <h4>Question 2</h4>
                    <h5>Your pup loves to be play games</h5>
                    <select id="q2" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="input-field col s6">
                    <h4>Question 3</h4>
                    <h5>Your pup loves to take long walks</h5>
                    <select id="q3" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s6">
                    <h4>Question 4</h4>
                    <h5>Your pup loves to stare out the window</h5>
                    <select id="q4" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="input-field col s6">
                    <h4>Question 5</h4>
                    <h5>Your pup loves to lay around and daydream</h5>
                    <select id="q5" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s6">
                    <h4>Question 6</h4>
                    <h5>Your pup loves to snack a lot</h5>
                    <select id="q6" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="input-field col s6">
                    <h4>Question 7</h4>
                    <h5>Your pup loves to take lots of naps</h5>
                    <select id="q7" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s6">
                    <h4>Question 8</h4>
                    <h5>Your pup loves to people watch</h5>
                    <select id="q8" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="input-field col s6">
                    <h4>Question 9</h4>
                    <h5>Your pup loves to listen to music</h5>
                    <select id="q9" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s6">
                    <h4>Question 10</h4>
                    <h5>Your pup loves to watch tv</h5>
                    <select id="q10" class = "surveyQuestions">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </div>
        </form> 

        <div class="center-align">
            <button id="submitButton" class="btn waves-effect waves-light" type="submitButton" name="action">submit<i class="material-icons right">send</i></button>
        </div>
    </div>    

    <br>

    <footer class="footer">
        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/hungle913/FriendFinder">GitHub Repo</a>
    </footer>

    <!-- Modal Display box showing closest pup match -->
	<div id="modal1" class="modal">
		<div class="modal-content">
			<h4>Closest PUP Match</h4>
			<div class="divider"></div>
			<h5 id="pupMatch"></h5>
			<img id="pupImage" class="materialboxed" src="">
		</div>
		<div class="modal-footer">
			<a href="/survey" class="modal-action modal-close waves-effect waves-green btn-flat">Find another!</a>
		</div>
	</div>

    <script>
        $(document).ready(function(){
            //Materialize jquery for survey question options
            $('select').formSelect();

            //Materialize jquery for Modal
            $('.modal').modal( {
                opacity: .5, //Opacity of modal overlay
                inDuration: 250, //Transition in duration in milliseconds
                outDuration: 250, //Transition out duration in milliseconds
                dismissible: false, //Allow modal to be dismissed by clicking outside of modal
                startingTop: '4%', //Starting top offset
                endingTop: '10%', //Ending top offset
            });
        });

        //Activate submit button
        $("#submitButton").on("click", function(event) {
            event.preventDefault();

            var userInput = {
                name: $("#name").val().trim(),
                photo: $("#photo").val().trim(),
                scores: [
                    $("#q1").val(),
                    $("#q2").val(),
                    $("#q3").val(),
                    $("#q4").val(),
                    $("#q5").val(),
                    $("#q6").val(),
                    $("#q7").val(),
                    $("#q8").val(),
                    $("#q9").val(),
                    $("#q10").val()
                ]
            };

            // console.log('userInput = ' + JSON.stringify(userInput));

            //post user input to friends list
            $.post('/api/friends', userInput)

            //once done return data from routes
            .done(function(data) {
                // console.log('response = ' + JSON.stringify(data));

                //Check if questions are completely answered
                    
                if ($("#name").val().trim() === "") {
                    alert("Please enter name of pup.");
                    
                } else if ($("#photo").val().trim() === "") {
                    alert("Please provide photo of pup.");
                    
                } else if (!$("#q1").val()) {
                    alert("Please answer Question 1");
                    
                } else if (!$("#q2").val()) {
                    alert("Please answer Question 2");
                    
                } else if (!$("#q3").val()) {
                    alert("Please answer Question 3");
                    
                } else if (!$("#q4").val()) {
                    alert("Please answer Question 4");
                    
                } else if (!$("#q5").val()) {
                    alert("Please answer Question 5");
                    
                } else if (!$("#q6").val()) {
                    alert("Please answer Question 6");
                    
                } else if (!$("#q7").val()) {
                    alert("Please answer Question 7");
                    
                } else if (!$("#q8").val()) {
                    alert("Please answer Question 8");
                    
                } else if (!$("#q9").val()) {
                    alert("Please answer Question 9");
                    
                } else if (!$("#q10").val()) {
                    alert("Please answer Question 10");
                    
                }else{
                    //If form is completely filled out
                    // Set values for friends match
                    $('#pupMatch').html(data.name);
                    $('#pupImage').attr("src", data.photo);

                    //Open modal
                    $('#modal1').modal('open');
                }
            });
        });
    </script>

</body>

</html>